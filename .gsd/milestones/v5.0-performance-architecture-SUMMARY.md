# Milestone: v5.0-performance-architecture

## Goal
Optimize the core engine for high-performance hardware, ensure resiliency against interruptions, and finalize the transition to a clean, plugin-based architecture.

## Must-Haves
- [ ] FFmpeg Hardware Acceleration (NVENC/VAAPI)
- [ ] Resumable Extraction (Mid-run checkpoints)
- [ ] Proactive Memory Management (Dynamic batch sizing)
- [ ] Complete removal of legacy metric logic from `core/models.py`
- [ ] Self-contained Operators (handling their own dependencies)

## Phases

### Phase 1: Architectural Cleanup
**Objective**: Finalize the Operator pattern and remove legacy code.
- Migrate remaining metrics from `Frame.calculate_quality_metrics` to Operators.
- Delete legacy methods from `core/models.py`.
- Refactor `AnalysisPipeline` to pass a rich `Context` object to Operators.

### Phase 2: Hardware Acceleration
**Objective**: Leverage GPU power for frame extraction.
- Implement hardware detection (Nvidia/Intel/AMD).
- Add `-hwaccel` support to `run_ffmpeg_extraction`.
- Benchmarking and verification.

### Phase 3: Resiliency & Resumability
**Objective**: Make the pipeline robust against crashes and OOMs.
- Implement mid-run checkpoints for extraction.
- Implement dynamic batch sizing based on VRAM/RAM pressure.
- Final E2E verification on long-form (1hr+) content.
