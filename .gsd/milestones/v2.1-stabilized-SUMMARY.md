# Milestone: v2.1-stabilized

## Completed: 2026-02-03

## Deliverables
- ✅ **Passing test suite**: 315 unit and smoke tests passing.
- ✅ **Memory watchdog**: Implemented in `ModelRegistry` to prevent OOM.
- ✅ **Refactored pipelines**: Monolithic functions in `pipelines.py` decomposed and modularized.
- ✅ **Verified GUI workflow**: E2E browser-based verification confirmed stable production state.
- ✅ **Linux RUN Script**: Native `scripts/linux_run_app.sh` optimized for `uv`.

## Phases Completed
1. **Phase 1: Core Regressions** — 2026-02-01
2. **Phase 2: Refactoring** — 2026-02-01
3. **Phase 3: Resource Management & UI State** — 2026-02-02
4. **Phase 4: Final Verification & Delivery** — 2026-02-03
5. **Phase 5: UI/UX Polish (User Feedback)** — 2026-02-03

## Metrics
- **Tests**: 315 total
- **UI Components**: Gradio 6.x
- **Platform support**: Windows & Linux (via `uv`)

## Lessons Learned
- **UI State Compatibility**: Decoupling `gr.State` requires careful mapping of legacy keys to prevent runtime crashes when external handlers expect specific keys.
- **FFmpeg I/O**: Creating a downscaled "lowres" video for SAM3 significantly improves tracking speed over individual JPEG frame I/O.
- **Model Registry Cleanup**: Explicitly calling `shutdown()` and `gc.collect()` is critical for freeing VRAM in long-running sessions.
