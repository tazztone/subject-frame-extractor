# Milestone: v4.0-cli-first

## Completed: 2026-02-07

## Deliverables
- ✅ Fix Tab 1 → Tab 2 UI blocker
- ✅ Create `cli.py` with `extract`, `analyze`, `filter` subcommands
- ✅ Implement run fingerprinting for cache hits
- ✅ RAW/JPEG import via ExifTool preview extraction
- ✅ XMP sidecar export for Lightroom

## Phases Completed
1. **Phase 0: Triage (UI Blocker)** — 2026-02-07
2. **Phase 1: CLI Foundation** — 2026-02-07
3. **Phase 2: Caching & Idempotency** — 2026-02-07
4. **Phase 3: Photo Mode (MVP)** — 2026-02-07
5. **Phase 4: Polish & Verification** — 2026-02-07
6. **Phase 5: Post-Release Polish** — 2026-02-07

## Metrics
- **Files changed**: 57 (since v3.0)
- **Insertions**: 2588
- **Deletions**: 1435
- **Key dependencies added**: `exiftool`, `click`, `pydantic`

## Lessons Learned
- **ExifTool over FFmpeg**: For RAW embedded previews, direct binary access via ExifTool is significantly more reliable and faster than FFmpeg's video-centric decoding.
- **CLI-First Verification**: Implementing the CLI first provided a robust test harness that caught several pipeline edge cases (like positional argument bugs) before the UI was even touched.
- **Fingerprinting Efficiency**: Run fingerprinting (hashing settings + metadata) provided a "Zero-IO" skip mechanism that radically improved iteration speed during testing.
- **Logging Decoupling**: Large CLI outputs require explicit decoupling of internal developer logs from user-facing progress updates to maintain professional terminal UX.

## Technical Debt Remaining
- Photo Mode still lacks recursive folder support (MVP limitation).
- Dependency management guidance for agents (avoiding system python).
